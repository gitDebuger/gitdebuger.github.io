<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-rc.14">
    <script>
      (function() {
        const userMode = localStorage.getItem('vuepress-reco-color-scheme') || 'auto';
        const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

        if (userMode === 'dark' || (userMode === 'auto' && systemDarkMode)) {
          document.documentElement.classList.toggle('dark', true);
        }
      })();
    </script>
    <title>继承 | Yunge Hu 's Blog</title><meta name="description" content="Just playing around">
    <link rel="preload" href="/assets/style-DFiSfBVn.css" as="style"><link rel="stylesheet" href="/assets/style-DFiSfBVn.css">
    <link rel="modulepreload" href="/assets/app-BPAT15QX.js"><link rel="modulepreload" href="/assets/Javamianxiangduixiangchengxusheji——jicheng.html-DoByXzp1.js">
    <link rel="prefetch" href="/assets/timeline.html-Cf9itObU.js" as="script"><link rel="prefetch" href="/assets/posts.html-9U5zmiK0.js" as="script"><link rel="prefetch" href="/assets/friendship-link.html-Deym3KjZ.js" as="script"><link rel="prefetch" href="/assets/1.html-Dd1LQ9jk.js" as="script"><link rel="prefetch" href="/assets/1.html-iocCzodJ.js" as="script"><link rel="prefetch" href="/assets/1.html-C8uZXgW9.js" as="script"><link rel="prefetch" href="/assets/1.html-CGy6iFqz.js" as="script"><link rel="prefetch" href="/assets/1.html-C1q8fPp3.js" as="script"><link rel="prefetch" href="/assets/1.html-HkBekStt.js" as="script"><link rel="prefetch" href="/assets/2.html-CU2X8h_w.js" as="script"><link rel="prefetch" href="/assets/index.html-CKEvLiD2.js" as="script"><link rel="prefetch" href="/assets/Neo4j.html-CfUHnRcT.js" as="script"><link rel="prefetch" href="/assets/index.html-CK8STmzT.js" as="script"><link rel="prefetch" href="/assets/README.zh.html-Dpdelqla.js" as="script"><link rel="prefetch" href="/assets/index.html-D8QPeaeY.js" as="script"><link rel="prefetch" href="/assets/suoyincaozuo.html-DJ7xAyi9.js" as="script"><link rel="prefetch" href="/assets/Javajibenchengxushejijiegou.html-DMdf3gbY.js" as="script"><link rel="prefetch" href="/assets/Javamianxiangduixiangchengxusheji——duixiangyulei.html-CbZVbwam.js" as="script"><link rel="prefetch" href="/assets/Javamianxiangduixiangchengxusheji——jiekou、lambdabiaodashiyunabulei.html-DgHlNNIv.js" as="script"><link rel="prefetch" href="/assets/bingfa.html-CEgd-owN.js" as="script"><link rel="prefetch" href="/assets/yichangduanyanherizhi.html-BfGliT9G.js" as="script"><link rel="prefetch" href="/assets/fanxingyujihe.html-DSVYvSxD.js" as="script"><link rel="prefetch" href="/assets/lab0.html-BKIf9boD.js" as="script"><link rel="prefetch" href="/assets/lab1.html-DSQxGIcf.js" as="script"><link rel="prefetch" href="/assets/lab2.html-BImAL-OR.js" as="script"><link rel="prefetch" href="/assets/lab3.html-u0GWZYGJ.js" as="script"><link rel="prefetch" href="/assets/lab4.html-CkmQWF9V.js" as="script"><link rel="prefetch" href="/assets/lab5.html-GaQV3tiH.js" as="script"><link rel="prefetch" href="/assets/lab6.html-D7XhtEUZ.js" as="script"><link rel="prefetch" href="/assets/index.html-a1IEZ0IW.js" as="script"><link rel="prefetch" href="/assets/404.html-BkfmFLD9.js" as="script"><link rel="prefetch" href="/assets/Valine.min-Dm4Ijz6H.js" as="script"><link rel="prefetch" href="/assets/giscus-2a044aea-CdPDkb7_.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container series--no show-catalog"><header class="navbar-container not-open"><div class="navbar-inner"><div class="site-brand nav-item"><img class="logo" src="/logo.png" alt="Yunge Hu &#39;s Blog"><a href="/" class="site-name can-hide">Yunge Hu &#39;s Blog</a></div><div class="nav-item navbar-links-wrapper" style=""><div><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div><nav class="navbar-links"><!--[--><div class="navbar-links__item"><a href="/" class="link router-link-active" aria-label="Home"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Home<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a class="link" href="https://github.com/gitDebuger/gitdebuger.github.io" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->GitHub<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><span class="xicon-container btn-toggle-dark-mode btn--dark-mode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M15 2h2v3h-2z" fill="currentColor"></path><path d="M27 15h3v2h-3z" fill="currentColor"></path><path d="M15 27h2v3h-2z" fill="currentColor"></path><path d="M2 15h3v2H2z" fill="currentColor"></path><path d="M5.45 6.884l1.414-1.415l2.121 2.122l-1.414 1.414z" fill="currentColor"></path><path d="M23 7.58l2.121-2.12l1.414 1.414l-2.121 2.121z" fill="currentColor"></path><path d="M23.002 24.416l1.415-1.414l2.12 2.122l-1.413 1.414z" fill="currentColor"></path><path d="M5.47 25.13L7.59 23L9 24.42l-2.12 2.12l-1.41-1.41z" fill="currentColor"></path><path d="M16 8a8 8 0 1 0 8 8a8 8 0 0 0-8-8zm0 14a6 6 0 0 1 0-12z" fill="currentColor"></path></svg></span><span class="xicon-container btn-toggle-menus"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><circle cx="16" cy="8" r="2" fill="currentColor"></circle><circle cx="16" cy="16" r="2" fill="currentColor"></circle><circle cx="16" cy="24" r="2" fill="currentColor"></circle></svg></span></div></div></header><!----><!----><!----><!--[--><main class="page-container"><aside class="series-container"><!--[--><!--]--></aside><div class="page-content"><h1 class="page-title">继承</h1><div class="page-info"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M16 4a5 5 0 1 1-5 5a5 5 0 0 1 5-5m0-2a7 7 0 1 0 7 7a7 7 0 0 0-7-7z" fill="currentColor"></path><path d="M26 30h-2v-5a5 5 0 0 0-5-5h-6a5 5 0 0 0-5 5v5H6v-5a7 7 0 0 1 7-7h6a7 7 0 0 1 7 7z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Yunge Hu<!--]--></span></span><!----><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M11.17 6l3.42 3.41l.58.59H28v16H4V6h7.17m0-2H4a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2H16l-3.41-3.41A2 2 0 0 0 11.17 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[--><!--[--><a href="/categories/Java/1.html" class="">Java</a><!--]--><!--]--></span></span><!----><!----></div><div class="theme-reco-md-content"><div><h1 id="_2-继承" tabindex="-1"><a class="header-anchor" href="#_2-继承"><span>2 继承</span></a></h1><p>继承的基本思想是基于已有的类创建新的类，继承已经存在的类就是复用这些类的方法，并且可以增加一些新的方法和字段，使新的类能够适应新的情况。</p><h2 id="_2-1-类、超类和子类" tabindex="-1"><a class="header-anchor" href="#_2-1-类、超类和子类"><span>2.1 类、超类和子类</span></a></h2><h3 id="_2-1-1-定义子类" tabindex="-1"><a class="header-anchor" href="#_2-1-1-定义子类"><span>2.1.1 定义子类</span></a></h3><p>在Java中使用 <code>extends</code> 关键字表示继承，在Java中所有的继承都是公共继承，没有私有继承和保护继承。关键字 <code>extends</code> 表示正在构造的新类派生于一个已经存在的类，这个已经存在的类称为超类、基类或父类，新类称为子类或派生类。</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Manager</span> <span class="token keyword">extends</span> <span class="token class-name">Employee</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">double</span> bonus<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setBonus</span><span class="token punctuation">(</span><span class="token keyword">double</span> bonus<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>bonus <span class="token operator">=</span> bonus<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>新的 <code>Manager</code> 类会自动继承超类 <code>Employee</code> 中的方法和超类中的字段。Java语言规范指出声明为私有的类成员不会被这个类的子类继承，这里的继承是狭义的，他认为私有字段不会被继承是因为子类不能直接访问这些私有字段。</p><p>另外，记录这种特殊的类不能被扩展，也不能扩展其他类。</p><h3 id="_2-1-2-覆盖方法" tabindex="-1"><a class="header-anchor" href="#_2-1-2-覆盖方法"><span>2.1.2 覆盖方法</span></a></h3><p>可以在子类中提供新的方法覆盖超类中的同一方法。</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Manager</span> <span class="token keyword">extends</span> <span class="token class-name">Employee</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">double</span> bonus<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setBonus</span><span class="token punctuation">(</span><span class="token keyword">double</span> bonus<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>bonus <span class="token operator">=</span> bonus<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> bonus <span class="token operator">+</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果需要访问超类中的字段，需要通过公共接口，并且使用 <code>super</code> 关键字表示调用的是超类中的方法。</p><h3 id="_2-1-3-子类构造器" tabindex="-1"><a class="header-anchor" href="#_2-1-3-子类构造器"><span>2.1.3 子类构造器</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Manager</span> <span class="token keyword">extends</span> <span class="token class-name">Employee</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">double</span> bonus<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">Manager</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">double</span> salary<span class="token punctuation">,</span> <span class="token keyword">int</span> year<span class="token punctuation">,</span> <span class="token keyword">int</span> month<span class="token punctuation">,</span> <span class="token keyword">int</span> day<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> salary<span class="token punctuation">,</span> year<span class="token punctuation">,</span> month<span class="token punctuation">,</span> day<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>bonus <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这里的 <code>super</code> 关键字表示调用超类的构造器。由于子类不能访问超类的私有字段，所以必须通过超类的构造器初始化这些私有字段。</p><p>如果构造子类对象时没有显式地调用超类的构造器，那么超类必须有一个无参数构造器，这个构造器在子类构造之前调用。</p><p>超类的对象变量可以引用子类的对象，并且能够选择正确的方法调用。一个对象变量可以指示多种实际类型，称为多态；在运行时能够自动选择适当的方法，称为动态绑定。在Java中动态绑定是默认的行为，如果不希望一个方法可动态绑定，则可以使用 <code>final</code> 关键字进行标记。</p><h3 id="_2-1-4-继承层次结构" tabindex="-1"><a class="header-anchor" href="#_2-1-4-继承层次结构"><span>2.1.4 继承层次结构</span></a></h3><p>由一个公共超类派生出来的所有类的集合称为继承层次结构，在继承层次结构中，从某个特定的类到其祖先的路径称为该类的继承链。通常一个祖先可以有多个子孙链。</p><blockquote><p>不同于C++，Java不支持多重继承，但提供了一些类似多重继承的功能。</p></blockquote><h3 id="_2-1-5-多态" tabindex="-1"><a class="header-anchor" href="#_2-1-5-多态"><span>2.1.5 多态</span></a></h3><p>子类的每个对象也是超类的对象，反之则不然。根据替换规则，程序中需要超类对象的任何地方都可以使用子类替换。</p><p>在Java中，对象变量是多态的，一个超类的对象变量既可以引用超类的对象，也可以引用其任何一个子类的对象。并且，子类引用数组也可以转换成超类引用数组，不过这样很容易出现问题。所以，为了防止发生错误，所有数组都要牢记创建时的元素类型，并负责监督仅将类型兼容的引用存储到数组中。</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token class-name">Manager</span><span class="token punctuation">[</span><span class="token punctuation">]</span> managers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Manager</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">Employee</span><span class="token punctuation">[</span><span class="token punctuation">]</span> staff <span class="token operator">=</span> managers<span class="token punctuation">;</span></span>
<span class="line">staff<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">managers<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">setBonus</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// a bug!!!</span></span>
<span class="line"><span class="token comment">// ArrayStoreException</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-1-6-方法调用" tabindex="-1"><a class="header-anchor" href="#_2-1-6-方法调用"><span>2.1.6 方法调用</span></a></h3><p>下面是以 <code>x.f(args)</code> 为例关于方法调用过程的描述，其中 <code>x</code> 是类 <code>C</code> 的一个对象：</p><ol><li>编译器查看对象的声明类型和方法名，编译器会列举出 <code>C</code> 中所有名为 <code>f</code> 并且可访问的方法。从而，编译器得到所有的候选方法。</li><li>编译器确定方法调用中提供的参数类型，如果候选方法中存在完全匹配的方法就选择这个方法；否则尝试进行类型转换，如果不能进行类型转换，或者类型转换后依然没有找到匹配的方法，或者经过类型转换后有多个方法匹配，编译器会报错。至此，编译器得知需要调用的方法名和参数类型。</li><li>如果是 <code>private</code> 方法或 <code>static</code> 方法或 <code>final</code> 方法，或者是构造器，编译器可以准确得知应该调用哪个方法，称为静态绑定。如果要调用的方法依赖隐式参数的实际类型，那么必须在运行时使用动态绑定。</li><li>程序运行并且采用动态绑定调用方法时，虚拟机必须调用与 <code>x</code> 所引用对象的实际类型对应的方法。如果 <code>x</code> 的实际类型是 <code>C</code> 类的子类 <code>D</code> 类的对象，那么虚拟机将会首先在 <code>D</code> 类中寻找匹配的方法，如果没有找到再去 <code>C</code> 类中查找，以此类推到最终的超类 <code>Object</code> 类。</li></ol><p>如果每次方法调用都要完成这样的搜索，那么会产生巨大的时间开销。所以，虚拟机预先为每个类计算了一个方法表，其中列出了所有方法的签名和要调用的实际方法。虚拟机加载一个类之后就会构建这个方法表，为此要结合它在类文件中找到的方法以及超类的方法表。这样每次调用方法时，只需要查找这个方法表。</p><p>动态绑定有一个很重要的特性就是无需修改现有的代码就可以对程序进行扩展。</p><blockquote><p>注意：在覆盖一个方法的时候，子类方法不能低于超类方法的可见性。</p></blockquote><h3 id="_2-1-7-阻止继承-final类和方法" tabindex="-1"><a class="header-anchor" href="#_2-1-7-阻止继承-final类和方法"><span>2.1.7 阻止继承：final类和方法</span></a></h3><p>不允许被扩展的类就是 <code>final</code> 类，需要在类定义时使用 <code>final</code> 关键字。</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">Executive</span> <span class="token keyword">extends</span> <span class="token class-name">Manager</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>也可以将类中的某个方法声明为 <code>final</code> 方法，那么所有的子类都不能覆盖这个方法。另外 <code>final</code> 类中的方法自动成为 <code>final</code> 方法。</p><blockquote><p>将类声明为 <code>final</code> 不影响字段。</p></blockquote><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Employee</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>枚举和记录总是 <code>final</code> 类，无需显式指定。</p></blockquote><h3 id="_2-1-8-强制类型转换" tabindex="-1"><a class="header-anchor" href="#_2-1-8-强制类型转换"><span>2.1.8 强制类型转换</span></a></h3><p>如果将一个超类引用赋值给一个子类引用，就需要进行强制类型转换，但是必须保证引用的对象是子类或者子类的子类的对象，才不会出现运行时错误；如果不符合要求，则会产生 <code>ClassCastException</code> 异常。</p><p>如果需要强制类型转换，需要注意以下两点：</p><ol><li>只能在继承层次结构上进行强制类型转换</li><li>在将超类引用转换成子类引用时，应该使用 <code>instanceof</code> 进行检查。</li></ol><p>对于实现多态性的方法不需要进行强制类型转换，动态绑定机制可以自动找到正确的方法；只有在调用子类特有的方法时才需要进行强制类型转换。无论如何，应该尽量少使用强制类型转换。</p><h3 id="_2-1-9-instanceof模式匹配" tabindex="-1"><a class="header-anchor" href="#_2-1-9-instanceof模式匹配"><span>2.1.9 instanceof模式匹配</span></a></h3><p>在强制类型转换时，最好使用 <code>instanceof</code> 进行模式匹配。</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token keyword">var</span> staff <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">staff<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Manager</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">staff<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">staff<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>staff<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">Manager</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">Manager</span> boss <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Manager</span><span class="token punctuation">)</span>staff<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">// in Java 16</span></span>
<span class="line"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>staff<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">Manager</span> boss<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        boss<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果匹配则会自动设置 <code>boss</code> 变量，否则会生成 <code>false</code> 跳过 <code>if</code> 语句的主体。</p><p>注意：没有用的 <code>instanceof</code> 模式匹配是一个错误。</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token class-name">Manager</span> boss <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Manager</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">if</span> <span class="token punctuation">(</span>boss <span class="token keyword">instanceof</span> <span class="token class-name">Employee</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">// of course it is an Employee</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>当 <code>instanceof</code> 引入一个变量时可以立即使用这个变量，例如</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token class-name">Employee</span> e <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token keyword">instanceof</span> <span class="token class-name">Manager</span> m <span class="token operator">&amp;&amp;</span> m<span class="token punctuation">.</span>getBonus <span class="token operator">&gt;</span> <span class="token number">10000</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">double</span> bonus <span class="token operator">=</span> e <span class="token keyword">instanceof</span> <span class="token class-name">Manager</span> m <span class="token operator">?</span> m<span class="token punctuation">.</span>getBonus <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>除此之外，在Java 17中还引入了类型模式</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token class-name">String</span> description <span class="token operator">=</span> <span class="token keyword">switch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">case</span> <span class="token class-name">Executive</span> exec <span class="token operator">-&gt;</span> <span class="token string">&quot;An executive with a fancy title of &quot;</span> <span class="token operator">+</span> exec<span class="token punctuation">.</span><span class="token function">getTitle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">case</span> <span class="token class-name">Manager</span> m <span class="token operator">-&gt;</span> <span class="token string">&quot;A manager with a bonus of &quot;</span> <span class="token operator">+</span> m<span class="token punctuation">.</span><span class="token function">getBonus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">default</span> <span class="token operator">-&gt;</span> <span class="token string">&quot;A lowly employee with a salary of &quot;</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>类似于其他局部变量， <code>instanceof</code> 模式定义的局部变量会遮蔽字段，例如</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token keyword">class</span> <span class="token class-name">Value</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">double</span> v<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Value</span> other<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>other <span class="token keyword">instanceof</span> <span class="token class-name">LabelValue</span> v<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">// v is the same as other</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">// v denotes the field</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-1-10-受保护访问" tabindex="-1"><a class="header-anchor" href="#_2-1-10-受保护访问"><span>2.1.10 受保护访问</span></a></h3><p>如果希望限制超类中的某个方法或者某个字段允许子类访问，可以将类特性声明为受保护。</p><p>Java中的访问权限分为以下四级：</p><ol><li><code>private</code> 仅本类可以访问</li><li><code>public</code> 可由外部访问</li><li><code>protected</code> 本包和所有子类可以访问</li><li>无修饰符，本包可以访问</li></ol><h2 id="_2-2-object-所有类的超类" tabindex="-1"><a class="header-anchor" href="#_2-2-object-所有类的超类"><span>2.2 Object：所有类的超类</span></a></h2><p>Java的 <code>Object</code> 类是Java中所有类的超类。如果没有显式指定超类，那么 <code>Object</code> 类就是这个类的超类，不需要显式指定扩展自 <code>Object</code> 类。</p><h3 id="_2-2-1-object类型的变量" tabindex="-1"><a class="header-anchor" href="#_2-2-1-object类型的变量"><span>2.2.1 Object类型的变量</span></a></h3><p>可以使用 <code>Object</code> 类型的变量引用任何类型的对象，但是它只能作为任意值的泛型容器，要想执行具体操作需要检查其原始类型并进行强制类型转换。</p><p>在Java中只有基本类型不是对象，所有的数组类型都扩展了 <code>Object</code> 类。</p><h3 id="_2-2-2-equals方法" tabindex="-1"><a class="header-anchor" href="#_2-2-2-equals方法"><span>2.2.2 equals方法</span></a></h3><p>该方法用于检测两个对象是否相等。 <code>Object</code> 类中的 <code>equals</code> 方法将确定两个对象引用是否相同，如果需要基于状态检测两个对象是否相等，需要对该方法进行覆盖。</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Employee</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">double</span> salary<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">LocalDate</span> hireDay<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Object</span> otherObject<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">==</span> otherObject<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>otherObject <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> otherObject<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span>
<span class="line">        </span>
<span class="line">        <span class="token class-name">Employee</span> other <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Employee</span><span class="token punctuation">)</span>otherObject<span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span> other<span class="token punctuation">.</span>name<span class="token punctuation">)</span></span>
<span class="line">            <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>salary <span class="token operator">==</span> other<span class="token punctuation">.</span>salary</span>
<span class="line">            <span class="token operator">&amp;&amp;</span> <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>hireDay<span class="token punctuation">,</span> other<span class="token punctuation">.</span>hireDay<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上述代码中使用 <code>Objects.euqals</code> 方法是用于防止 <code>name</code> 或 <code>hireDay</code> 可能为空的情况。</p><p>在子类中定义 <code>equals</code> 方法时，首先调用超类的 <code>equals</code> 方法，如果检测失败显然为不相等；如果超类检测通过，再继续检测子类中的实例字段。</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Manager</span> <span class="token keyword">extends</span> <span class="token class-name">Employee</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">double</span> bonus<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Object</span> otherObject<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>otherObject<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">Manager</span> other <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Manager</span><span class="token punctuation">)</span>otherObject<span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>bonus <span class="token operator">==</span> other<span class="token punctuation">.</span>bonus<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意：记录会自动定义 <code>equals</code> 方法，不需要手动定义。</p><h3 id="_2-2-3-相等测试与继承" tabindex="-1"><a class="header-anchor" href="#_2-2-3-相等测试与继承"><span>2.2.3 相等测试与继承</span></a></h3><p>Java语言规范要求 <code>equals</code> 方法具有以下性质：</p><ol><li>自反性：<code>x.equals(x)</code> 应当返回 <code>true</code> 。</li><li>对称性：对于任意 <code>x</code> 和 <code>y</code> 当且仅当 <code>y.equals(x)</code> 返回 <code>true</code> 时 <code>x.equals(y)</code> 返回 <code>true</code> 。</li><li>传递性：如果 <code>x.equals(y)</code> 和 <code>y.equals(z)</code> 都返回 <code>true</code> 则 <code>x.equals(z)</code> 也应该返回 <code>true</code> 。</li><li>一致性：如果 <code>x</code> 和 <code>y</code> 引用的对象没有发生变化，则反复调用 <code>x.equals(y)</code> 应当返回同样的结果。</li><li>对于非 <code>null</code> 引用 <code>x</code> 调用 <code>x.equals(null)</code> 应当返回 <code>false</code> 。</li></ol><p>如果隐式参数和显式参数不属于同一个类，并且这两个类在同一个继承层次结构中时，很容易出现违反上述规则的情况。所以需要精心设计相等性检测的方法。下面是编写 <code>equals</code> 方法的技巧：</p><ol><li>将显式参数命名为 <code>otherObject</code> 稍后需要将它强制转换为另一个名为 <code>other</code> 的变量。</li><li>检测 <code>this</code> 与 <code>otherObject</code> 是否相等，也就是检测是否引用同一个对象。</li><li>检测 <code>otherObject</code> 是否为 <code>null</code> ，如果为 <code>null</code> 则返回 <code>false</code> 。</li><li>比较 <code>this</code> 与 <code>otherObject</code> 的类。如果 <code>equals</code> 的语义可以在子类中改变，则使用 <code>getClass</code> 检测，如果类型不匹配则返回 <code>false</code> ；如果所有的子类都有相同的 <code>equals</code> 语义，则使用 <code>instanceof</code> 检测，调用超类的相等性检测方法。</li><li>根据相等性概念的要求比较字段，使用 <code>==</code> 比较基本类型字段，使用 <code>Objects.equals</code> 比较对象字段。</li><li>如果在子类中重新定义 <code>equals</code> 方法，需要在其中包含一个 <code>super.equals(other)</code> 调用。</li></ol><p>对于数组类型的字段，可以使用静态的 <code>Arrays.equals</code> 方法检查相应的数组元素是否相等；对于多维数组，可以使用 <code>Arrays.deepEquals</code> 方法检测。</p><blockquote><p>在覆盖方法时可以使用 <code>@Override</code> 标记要覆盖的方法，如果没有覆盖而是定义了新方法编译器就会报错。</p></blockquote><h3 id="_2-2-4-hashcode方法" tabindex="-1"><a class="header-anchor" href="#_2-2-4-hashcode方法"><span>2.2.4 hashCode方法</span></a></h3><p>默认的 <code>hashCode</code> 方法定义在 <code>Object</code> 类中，每个对象默认的哈希值由对象的存储地址得出。如果重新定义了 <code>equals</code> 方法，还必须为可能插入哈希表的对象重新定义 <code>hashCode</code> 方法。</p><p><code>hashCode</code> 方法应当返回一个整数，定义 <code>hashCode</code> 方法时最好首先使用 <code>null</code> 安全的 <code>Objects.hashCode</code> 方法，当参数为空引用时会返回 <code>0</code> ，否则会返回对参数调用 <code>hashCode</code> 的结果。另外当需要组合多个哈希值时，可以使用 <code>Objects.hash</code> 并提供所有值作为参数，这个方法会对所有参数调用 <code>Objects.hashCode</code> 并组合这些哈希值。</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token number">7</span> <span class="token operator">*</span> <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span></span>
<span class="line">        <span class="token operator">+</span> <span class="token number">11</span> <span class="token operator">*</span> <span class="token class-name">Double</span><span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span></span>
<span class="line">        <span class="token operator">+</span> <span class="token number">13</span> <span class="token operator">*</span> <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span>hireDay<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">hash</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> salary<span class="token punctuation">,</span> hireDay<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">// Double.valueOf(salary).hashCode;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意：<code>equals</code> 与 <code>hashCode</code> 的定义必须相容，如果两个对象相等，那么两个对象的哈希值必须相等。</p><p>对于数组类型的字段，可以使用静态的 <code>Arrays.hashCode</code> 方法计算哈希值，它会计算数组元素的哈希值并组合。</p><p>对于记录类型，会自动定义 <code>hashCode</code> 方法，它由字段的哈希值得出最终的哈希值。</p><h3 id="_2-2-5-tostring方法" tabindex="-1"><a class="header-anchor" href="#_2-2-5-tostring方法"><span>2.2.5 toString方法</span></a></h3><p>Object类中的 <code>toString</code> 方法会返回一个字符串表示这个对象的值。绝大多数 <code>toString</code> 方法都遵循这样的格式：首先是类名，随后是一对方括号括起来的字段值。</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Employee</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token operator">+</span> <span class="token string">&quot;[name=&quot;</span> <span class="token operator">+</span> name</span>
<span class="line">            <span class="token operator">+</span> <span class="token string">&quot;,salary=&quot;</span> <span class="token operator">+</span> salary</span>
<span class="line">            <span class="token operator">+</span> <span class="token string">&quot;,hireDay=&quot;</span> <span class="token operator">+</span> hireDay</span>
<span class="line">            <span class="token operator">+</span> <span class="token string">&quot;]&quot;</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>对于子类的 <code>toString</code> 方法，如果超类调用了 <code>getClass().getName()</code> 方法，那么子类只需要调用 <code>super.toString</code> 并添加子类字段即可。</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Manager</span> <span class="token keyword">extends</span> <span class="token class-name">Employee</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token operator">+</span> <span class="token string">&quot;[bonus=&quot;</span> <span class="token operator">+</span> bonus</span>
<span class="line">            <span class="token operator">+</span> <span class="token string">&quot;]&quot;</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>通过 <code>getClass().getName()</code> 方法就可以自动生成对象的类名，并且便于子类编写自己的 <code>toString</code> 方法，所以不要把类名硬编码到方法中。</p><p>当对象或基本类型通过运算符 <code>+</code> 与字符串进行拼接操作，编译器会自动调用该对象或基本类型的 <code>toString</code> 方法来获得其字符串描述。</p><p>如果类没有定义 <code>toString</code> 方法，那么就会调用 <code>Object</code> 类中的 <code>toString</code> 方法生成对象的类名和哈希值组成的字符串。</p><p>在使用 <code>System.out.println(x)</code> 方法打印 <code>x</code> 时会自动调用 <code>x</code> 的 <code>toString</code> 方法，并打印输出得到的字符串。</p><p>对于数组变量，需要调用 <code>Arrays.toString</code> 方法生成正确的字符串；对于多维数组，需要调用 <code>Arrays.deepToString</code> 方法。</p><h2 id="_2-3-泛型数组列表" tabindex="-1"><a class="header-anchor" href="#_2-3-泛型数组列表"><span>2.3 泛型数组列表</span></a></h2><p>Java中的 <code>ArrayList</code> 是一个有类型参数的泛型类，为了指定数组列表保存的元素对象的类型，需要用一对尖括号将类名括起来追加到 <code>ArrayList</code> 的后面，例如 <code>ArrayList&lt;T&gt;</code> 。Java的 <code>ArrayList</code> 类似于C++中的 <code>vector</code> 容器。</p><h3 id="_2-3-1-声明数组列表" tabindex="-1"><a class="header-anchor" href="#_2-3-1-声明数组列表"><span>2.3.1 声明数组列表</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> elements <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> elements <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">var</span> elements <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以上三种写法都是合规的声明语句。</p><p>如果没有指定类型会生成 <code>ArrayList&lt;Object&gt;</code> 容器。</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token keyword">var</span> elements <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>Java 5以前的版本没有提供泛型类，而是有一个保存 <code>Object</code> 类型元素的 <code>ArrayList</code> 类，现在依然可以使用这个类，它被认为是擦除了类型参数的原始类型。</p><p>在更古老的Java版本中，程序员使用 <code>Vector</code> 类实现动态数组。现在 <code>Vector</code> 已经很少使用了，这两者有两点区别：</p><ol><li><code>Vector</code> 是线程安全的，<code>ArrayList</code> 不是。</li><li><code>ArrayList</code> 在底层数组不够用时在原来的基础上扩展0.5倍， <code>Vector</code> 是扩展1倍。</li></ol></blockquote><p>使用 <code>add</code> 方法可以将元素添加到数组列表中。在填充数组列表之前可以预先指定数组列表的容量，通过调用 <code>ensureCapacity</code> 方法实现；另外也可以在构造时传递容量参数。</p><p>调用 <code>size</code> 方法将返回数组列表实际包含的元素个数。如果确定数组列表的大小不会再发生变化，可以调用 <code>trimToSize</code> 方法将内存块的大小调整为保存当前元素需要的存储空间。</p><blockquote><p>注意：不同于C++中 <code>vector</code> 的按值复制，Java的 <code>ArrayList</code> 是将同一数组列表的引用赋值给另一变量。</p><div class="language-c++ line-numbers-mode" data-highlighter="prismjs" data-ext="c++" data-title="c++"><pre class="language-c++"><code><span class="line">vector&lt;T&gt; arr1;</span>
<span class="line">vector&lt;T&gt; arr2 = arr1;</span>
<span class="line">// copy the elements of arr1 to arr2</span>
<span class="line">// arr1 and arr2 are two different vectors</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> arr1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> arr2 <span class="token operator">=</span> arr1<span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// arr1 and arr2 point to the same ArrayList</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><h3 id="_2-3-2-访问数组列表元素" tabindex="-1"><a class="header-anchor" href="#_2-3-2-访问数组列表元素"><span>2.3.2 访问数组列表元素</span></a></h3><p>访问或改变数组列表的元素需要使用 <code>set</code> 和 <code>get</code> 方法。</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token class-name">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> staff <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">T</span><span class="token punctuation">[</span><span class="token constant">SIZE</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">staff<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">var</span> v <span class="token operator">=</span> staff<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意：只有当数组列表的大小大于 <code>i</code> 时才能调用 <code>set</code> 方法，向数组列表中添加元素需要使用 <code>add</code> 方法完成。</p><p>需要在数组列表的中间添加元素，可以使用带有索引参数的 <code>add</code> 方法。同样，删除可以使用 <code>remove</code> 方法完成。</p><p>可以使用 <code>toArray</code> 方法将数组列表转换成数组，便于访问数组元素。</p><p>遍历数组列表也可以使用范围 <code>for</code> 循环完成。</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">// toArray</span></span>
<span class="line"><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">T</span><span class="token punctuation">[</span>list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">list<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// add and remove</span></span>
<span class="line"><span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span></span>
<span class="line">list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">var</span> v <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// for each loop</span></span>
<span class="line"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> v <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意：<code>set</code> 方法会返回更改之前的值，<code>remove</code> 方法会返回被删除的值。</p><h3 id="_2-3-3-类型化与原始数组列表的兼容性" tabindex="-1"><a class="header-anchor" href="#_2-3-3-类型化与原始数组列表的兼容性"><span>2.3.3 类型化与原始数组列表的兼容性</span></a></h3><p>将类型化的数组列表赋值给原始数组列表是允许的，并且不需要进行强制类型转换；但是将原始数组列表赋值给类型化数组列表会得到警告，如果使用强制类型转换会得到另一个警告。可以使用 <code>@SuppressWarnings(&quot;unchecked&quot;)</code> 来标记接受强制类型转换。</p><p>在程序运行时，所有的数组列表都是相同的，即虚拟机中没有类型参数。</p><h2 id="_2-4-对象包装器与自动装箱" tabindex="-1"><a class="header-anchor" href="#_2-4-对象包装器与自动装箱"><span>2.4 对象包装器与自动装箱</span></a></h2><p>所有的基本类型都有一个对应的类，通常这些类称为包装器。包装器类是不可变的，一旦构造了包装器就不允许更改其中的值。同时，包装器类是 <code>final</code> 的，因此不能派生他们的子类。</p><p>这些包装器类分别是 <code>Integer</code> <code>Long</code> <code>Float</code> <code>Double</code> <code>Short</code> <code>Byte</code> <code>Character</code> 和 <code>Boolean</code> ，其中前六个类派生于公共超类 <code>Number</code> 。</p><p>由于Java的泛型中的类型参数不允许是基本类型，所以需要使用包装器类操作基本类型。</p><h3 id="_2-4-1-自动装箱与自动拆箱" tabindex="-1"><a class="header-anchor" href="#_2-4-1-自动装箱与自动拆箱"><span>2.4.1 自动装箱与自动拆箱</span></a></h3><p>将基本类型赋值给对应的包装器类型会自动装箱，将包装器类型赋值给基本类型会自动拆箱。自动装箱和自动拆箱同样也适用于算术表达式。例如下面的程序：</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token keyword">var</span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// means list.add(Integer.valueOf(3));</span></span>
<span class="line"><span class="token keyword">int</span> num <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// means int num = list.get(i).intValue();</span></span>
<span class="line"><span class="token class-name">Integer</span> n <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token operator">++</span>n<span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// means n = Integer.valueOf(++(n.intValue()));</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>关于同一性检测，运算符 <code>==</code> 可以应用于包装类对象，但是比较有可能会失败，所以需要使用 <code>equals</code> 方法进行比较。</p><blockquote><p>自动装箱规范要求 <code>boolean</code> <code>byte</code> <code>char(&lt;=127)</code> <code>short(-128~127)</code> <code>int(-128~127)</code> 包装到固定的对象中，但是不要依赖自动装箱规范中的包装器对象同一性，不要使用 <code>==</code> 比较包装器对象，也不要将包装器对象作为锁。</p><p>不要使用包装器类构造器，它们已经被弃用，可以使用 <code>valueOf</code> 方法或者是自动装箱。</p></blockquote><p>由于包装器类引用可以为 <code>null</code> 引用，所以自动装箱有可能会抛出 <code>NullPointerException</code> 异常。</p><p>如果在一个表达式内混合使用 <code>Integer</code> 和 <code>Double</code> 类型，会自动完成类型提升。</p><p>自动装箱和自动拆箱是编译器的工作，替换工作在编译时完成。</p><p>使用包装器类还可以将某些基本方法放置在包装器类中，便于归类，例如 <code>Integer.parseInt(s)</code> 方法</p><h3 id="_2-4-2-包装器类常用api" tabindex="-1"><a class="header-anchor" href="#_2-4-2-包装器类常用api"><span>2.4.2 包装器类常用API</span></a></h3><ul><li><code>int intValue()</code> 将 <code>Integer</code> 对象的值作为 <code>int</code> 值返回。</li><li><code>static String toString(int i)</code> 返回指定数值 <code>i</code> 的十进制表示。</li><li><code>static String toString(int i, int radix)</code> 返回数值 <code>i</code> 的 <code>radix</code> 进制表示。</li><li><code>static int parseInt(String s)</code> 返回 <code>s</code> 表示的十进制整数。</li><li><code>static int parseInt(String s, int radix)</code> 返回 <code>s</code> 表示的 <code>radix</code> 进制整数。</li><li><code>static Integer valueOf(String s)</code> 从 <code>s</code> 的表示的十进制整数中构造 <code>Integer</code> 对象。</li><li><code>static Integer valueOf(String s, int radix)</code> 从 <code>s</code> 表示的 <code>radix</code> 进制整数中构造 <code>Integer</code> 对象。</li></ul><p>其他类型的包装器用法类似。</p><p>另外 <code>Number</code> 类中有一个方法 <code>Number parse(String s)</code> 返回 <code>s</code> 表示的数值构造的 <code>Number</code> 对象。</p><h2 id="_2-5-参数个数可变的方法" tabindex="-1"><a class="header-anchor" href="#_2-5-参数个数可变的方法"><span>2.5 参数个数可变的方法</span></a></h2><p>以 <code>System.out.printf()</code> 方法为例</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PrintStream</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">PrintStream</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token class-name">String</span> fmt<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token function">format</span><span class="token punctuation">(</span>fmt<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>其中 <code>...</code> 表示可以接收任意数量的对象，对于方法的实现者来说，参数类型 <code>Object...</code> 和 <code>Object[]</code> 完全一样。编译器会转换每个调用，将参数打包到一个数组中，并根据需要自动装箱。</p><p>例如定义求若干数值的最大值</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">double</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> values<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">double</span> largest <span class="token operator">=</span> <span class="token class-name">Double</span><span class="token punctuation">.</span><span class="token constant">NEGATIVE_INFINITY</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">double</span> v <span class="token operator">:</span> values<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>v <span class="token operator">&gt;</span> largest<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            largest <span class="token operator">=</span> v<span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">return</span> largest<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>例如这样调用函数</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token keyword">double</span> m <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token number">3.1</span><span class="token punctuation">,</span> <span class="token number">40.4</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>编译器会将 <code>new double[] {3.1, 40.4, -5}</code> 传递给 <code>max</code> 函数。</p><p>所以说，也可以直接将数组作为最后一个参数传递给有可变参数的方法；当然，如果一个方法的最后一个参数是数组，也可以把它替换成有可变参数的方法而不会破坏已有代码。比如说，主方法也可以这样声明</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-6-抽象类" tabindex="-1"><a class="header-anchor" href="#_2-6-抽象类"><span>2.6 抽象类</span></a></h2><p>有些方法对于超类而言根本无法具体实现，而必须在子类中根据需要覆盖，通过使用 <code>abstract</code> 关键字可以声明该方法为抽象方法而不需要提供具体实现。包含一个或多个抽象方法的类必须声明为抽象类。</p><p>抽象方法相当于子类方法的具体实现的占位符。扩展抽象类时，如果在子类中保留部分或所有抽象方法未定义，则必须把子类也标记为抽象类；如果定义全部方法，子类就不再是抽象类。</p><p>不包含抽象方法的类也可以标记为抽象类。</p><p>抽象类不能实例化，也就是说抽象类没有对象。😭 😭 😭</p><p>不过可以创建抽象类的对象变量，这样的变量只能引用非抽象子类的对象。通过抽象类可以利用多态使用超类的变量调用子类的对象方法，如果不在超类中声明，那么就无法这样调用，编译器只允许调用在类中声明的方法。</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">String</span> <span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Employee</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">double</span> salary<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">LocalDate</span> hireDay<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">double</span> salary<span class="token punctuation">,</span> <span class="token keyword">int</span> year<span class="token punctuation">,</span> <span class="token keyword">int</span> month<span class="token punctuation">,</span> <span class="token keyword">int</span> day<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>salary <span class="token operator">=</span> salary<span class="token punctuation">;</span></span>
<span class="line">        hireDay <span class="token operator">=</span> <span class="token class-name">LocalDate</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>year<span class="token punctuation">,</span> month<span class="token punctuation">,</span> day<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token string">&quot;an employee with a salary of %.2f&quot;</span><span class="token punctuation">.</span><span class="token function">formatted</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> major<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">String</span> major<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>major <span class="token operator">=</span> major<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token string">&quot;a student majoring in &quot;</span> <span class="token operator">+</span> major<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-7-枚举类" tabindex="-1"><a class="header-anchor" href="#_2-7-枚举类"><span>2.7 枚举类</span></a></h2><p>例如下面的声明</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Size</span> <span class="token punctuation">{</span><span class="token constant">SMALL</span><span class="token punctuation">,</span> <span class="token constant">MEDIUM</span><span class="token punctuation">,</span> <span class="token constant">LARGE</span><span class="token punctuation">,</span> <span class="token constant">EXTRA_LARGE</span><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>这个声明本质上是定义了一个枚举类，它刚好有四个实例，不可能构造新的对象。因此，在比较枚举类型的值时，只需要使用 <code>==</code> 运算符比较。如果有需要的话，可以为枚举类增加构造器、方法和字段，枚举的构造器总是私有的，只能在构造枚举常量的时候调用。</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Size</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">SMALL</span><span class="token punctuation">(</span><span class="token string">&quot;S&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">MEDIUM</span><span class="token punctuation">(</span><span class="token string">&quot;M&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">LARGE</span><span class="token punctuation">(</span><span class="token string">&quot;L&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">EXTRA_LARGE</span><span class="token punctuation">(</span><span class="token string">&quot;XL&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> abbreviation<span class="token punctuation">;</span></span>
<span class="line">    <span class="token comment">// automatically private</span></span>
<span class="line">    <span class="token class-name">Size</span><span class="token punctuation">(</span><span class="token class-name">String</span> abbreviation<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>abbreviation <span class="token operator">=</span> abbreviation<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getAbbreviation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>abbreviation<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>所有的枚举类型都是抽象类 <code>Enum</code> 的子类，其中 <code>toString</code> 方法会返回枚举常量名，逆方法静态方法 <code>static Enum valueOf(Class enumClass, String name)</code> 会返回指定类中有指定名字的枚举常量。</p><p>每个枚举类型都有一个静态的 <code>values</code> 方法，返回一个包含全部枚举值的数组。</p><p>另外 <code>ordinal</code> 方法会返回一个枚举常量在声明中的位置，位置从 <code>0</code> 开始计数。</p><blockquote><p><code>Enum</code> 类有一个类型参数，例如枚举类型 <code>Size</code> 实际上扩展了 <code>Enum&lt;Size&gt;</code> 超类，类型参数会在 <code>compareTo</code> 方法中使用。</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token keyword">int</span> <span class="token function">compareTo</span><span class="token punctuation">(</span><span class="token class-name">E</span> other<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>如果枚举常量出现在 <code>other</code> 之前返回负整数，如果 <code>this==other</code> 返回 <code>0</code> ，如果出现在 <code>other</code> 之后返回正整数。出现次序在声明中指定。</p></blockquote><h2 id="_2-8-密封类" tabindex="-1"><a class="header-anchor" href="#_2-8-密封类"><span>2.8 密封类</span></a></h2><p>在Java中密封类会控制哪些类可以继承它，这个特性在Java 17中最终确定。</p><p>将一个类声明为密封类可以如下操作</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">sealed</span> <span class="token keyword">class</span> <span class="token class-name">JSONValue</span></span>
<span class="line">    <span class="token keyword">permits</span> <span class="token class-name">JSONArray</span><span class="token punctuation">,</span> <span class="token class-name">JSONNumber</span><span class="token punctuation">,</span> <span class="token class-name">JSONString</span><span class="token punctuation">,</span> <span class="token class-name">JSONBoolean</span><span class="token punctuation">,</span> <span class="token class-name">JSONObject</span><span class="token punctuation">,</span> <span class="token class-name">JSONNull</span></span>
<span class="line">    <span class="token comment">// this highlight has a little problem</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>密封类可以准确地描述领域约束。</p><p>一个密封类允许的子类必须是可访问的，他们不能是嵌套在另一个类中的私有类，也不能是位于另一个包中的包可见类。对于允许的公共子类，他们必须与密封类在同一个包中；如果使用模块，则必须在同一个模块中。</p><p>声明密封类也可以不加 <code>permits</code> 子句，如果这样所有的直接子类都必须在同一个文件中声明，不能访问这个文件的程序员就不能派生它的子类。</p><p>密封类的子类必须指定它是 <code>sealed</code> 还是 <code>final</code> 还是允许继续派生子类，对于最后一种情况必须显式指定为 <code>non-sealed</code> 。</p><h2 id="_2-9-反射" tabindex="-1"><a class="header-anchor" href="#_2-9-反射"><span>2.9 反射</span></a></h2><p>反射库提供的工具集可以用来编写动态操纵Java代码的程序，使用反射，Java可以支持用户界面生成器、对象关系映射器以及其他需要动态查询类能力的开发工具。</p><p>能够分析类能力的程序称为可反射，反射机制可以用来：</p><ol><li>在运行时分析类的能力。</li><li>在运行时检查对象。</li><li>实现泛型数组操作代码。</li><li>利用 <code>Method</code> 对象实现类似函数指针的功能。</li></ol><p>反射机制主要用于工具开发，一般的应用开发很少用到反射。</p><h3 id="_2-9-1-class类" tabindex="-1"><a class="header-anchor" href="#_2-9-1-class类"><span>2.9.1 Class类</span></a></h3><p>在程序运行期间，Java运行时系统会始终为所有对象维护一个运行时类型标识。这个信息会追踪每个对象所属的类，虚拟机利用运行时类型信息选择要执行的正确方法。</p><p>通过 <code>Class</code> 类可以访问这些信息，它会描述一个特定类的属性，例如 <code>getName</code> 方法将会返回类的名字，如果类在一个包里，包名也将作为类名的一部分。</p><h4 id="_2-9-1-1-获取对象" tabindex="-1"><a class="header-anchor" href="#_2-9-1-1-获取对象"><span>2.9.1.1 获取对象</span></a></h4><p>获取 <code>Class</code> 类对象有以下三种方式：</p><ol><li>利用 <code>Object</code> 类中的 <code>getClass()</code> 方法。</li><li>使用静态方法 <code>Class.forName(String)</code> 获得类名对应的 <code>Class</code> 对象。如果传递的参数是一个类名或接口名，该方法可以正常运行；否则该方法将会抛出一个检查型异常。注意无论何时使用这个方法都应该提供一个异常处理器。</li><li>使用 <code>T.class</code> 其中 <code>T</code> 是任意的Java类型，注意 <code>T</code> 可以是基本类型也可以是类类型。</li></ol><blockquote><p><code>Class</code> 类实际上是一个泛型类，但在大多数实际应用中可以忽略类型参数，使用原始的 <code>Class</code> 类。</p></blockquote><h4 id="_2-9-1-2-数组对象的名字" tabindex="-1"><a class="header-anchor" href="#_2-9-1-2-数组对象的名字"><span>2.9.1.2 数组对象的名字</span></a></h4><p>数组类型的名字会有些奇怪，比如以下程序</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">var</span> classes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">        classes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span></span>
<span class="line">        classes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">short</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span></span>
<span class="line">        classes<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">long</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span></span>
<span class="line">        classes<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span></span>
<span class="line">        classes<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">boolean</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span></span>
<span class="line">        classes<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">float</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span></span>
<span class="line">        classes<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">double</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span></span>
<span class="line">        classes<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">8</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>classes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>将会输出</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token punctuation">[</span><span class="token class-name">I</span></span>
<span class="line"><span class="token punctuation">[</span><span class="token class-name">S</span></span>
<span class="line"><span class="token punctuation">[</span><span class="token class-name">J</span></span>
<span class="line"><span class="token punctuation">[</span><span class="token class-name">C</span></span>
<span class="line"><span class="token punctuation">[</span><span class="token class-name">Z</span></span>
<span class="line"><span class="token punctuation">[</span><span class="token class-name">F</span></span>
<span class="line"><span class="token punctuation">[</span><span class="token class-name">D</span></span>
<span class="line"><span class="token punctuation">[</span><span class="token class-name">B</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>对于 <code>T[]</code> 类型，返回的字符串如下</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token string">&quot;[L&quot;</span> <span class="token operator">+</span> <span class="token class-name">T</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>如果是多维数组，有几维就会有几个 <code>[</code> 符号开头。</p><h4 id="_2-9-1-3-对class对象的操作" tabindex="-1"><a class="header-anchor" href="#_2-9-1-3-对class对象的操作"><span>2.9.1.3 对Class对象的操作</span></a></h4><p>虚拟机为每一个类型管理一个唯一的 <code>Class</code> 对象，因此可以用 <code>==</code> 比较两个类对象是否相等。这个比较方式和 <code>instanceof</code> 不同，后者能通过的比较前者不一定能通过。</p><p>如果有一个 <code>Class</code> 类型的对象，可以调用 <code>getConstructor()</code> 得到 <code>Constructor</code> 类型的对象，然后再调用 <code>newInstance()</code> 方法构造实例。注意，该方法调用的是无参数构造器，如果这个类没有无参数构造器，则会抛出异常。</p><blockquote><p>有一个已经废弃的 <code>Class.toInstance</code> 方法，它也可以利用无参数构造器构造一个实例，不过如果构造器抛出一个检查型异常，那么这个异常将不做任何检查重新抛出。而 <code>Constructor.newInstance</code> 会把所有的构造器异常包装到 <code>InvocationTargetException</code> 异常中。</p></blockquote><p>上面提到的 <code>getConstructor()</code> 和 <code>newInstance()</code> 也可以通过传递类型参数获取指定类型的构造器或调用构造器。</p><h3 id="_2-9-2-声明异常入门" tabindex="-1"><a class="header-anchor" href="#_2-9-2-声明异常入门"><span>2.9.2 声明异常入门</span></a></h3><p>当运行时发生错误时，程序就会抛出异常；如果没有提供处理异常的机制，程序就会终止，并在控制台上打印异常类型。</p><p>异常分为非检查型异常和检查型异常，对于检查型异常需要提供异常处理器；对于非检查型异常应当注意不要写出这样的程序，而不是依赖于异常处理。</p><p>如果一个方法包含一条可能抛出检查型异常的语句，则应当在方法名上增加一个 <code>throws</code> 子句。调用这个方法的任何方法也需要 <code>throws</code> 声明，包括 <code>main</code> 方法。如果异常确实出现，则 <code>main</code> 方法将终止并提供一个栈轨迹。</p><p>只需要为检查型异常提供 <code>throws</code> 语句。如果调用了一个可能抛出检查型异常的方法而没有提供相应的异常处理器，编译器就会报错。</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">doSomethingWithClass</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">throws</span> <span class="token class-name">ReflectiveOperationException</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">Class</span> cl <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-9-3-资源" tabindex="-1"><a class="header-anchor" href="#_2-9-3-资源"><span>2.9.3 资源</span></a></h3><p>类通常有一些关联的数据文件，例如图象和声音文件、包含消息字符串和按钮标签的文本文件，这些关联文件统称为资源。</p><p><code>Class</code> 类提供了相应的服务可以查找资源文件，下面是必要的步骤：</p><ol><li><p>获得拥有资源的类的 <code>Class</code> 对象</p></li><li><p>有些方法接受描述资源位置的URL，所以可以调用</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token class-name">Class</span> cl <span class="token operator">=</span> <span class="token class-name">T</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">URL</span> url <span class="token operator">=</span> cl<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token string">&quot;...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>否则使用 <code>getResourceAsStream</code> 方法得到输入流来读取文件中的数据。</p></li></ol><p>重点在于Java虚拟机知道如何查找一个类，所以能够搜索相同位置上的关联资源，也就是说可以将资源文件与类文件放在同一个目录中。除此之外还可以提供一个相对或绝对路径。</p><p>文件的自动装载是利用资源加载特性完成的，没有标准的方法来解释资源文件的内容，每个程序必须有自己的方法来解释它的资源文件。</p><p>另一个经常使用资源的地方是程序的国际化，与语言相关的字符串都存放在资源文件中，每种语言对应一个文件。国际化API支持一种标准方法来组织和访问这些本地化文件。</p><h3 id="_2-9-4-利用反射分析类的能力" tabindex="-1"><a class="header-anchor" href="#_2-9-4-利用反射分析类的能力"><span>2.9.4 利用反射分析类的能力</span></a></h3><p>反射机制最重要的内容允许检查类的结构。</p><p><code>java.lang.reflect</code> 包中有三个类 <code>Field</code> <code>Method</code> 和 <code>Constructor</code> ，分别用于描述类的字段、方法和构造器，这三个类都有一个名为 <code>getName</code> 的方法，用来返回字段、方法或构造器的名字。</p><p><code>Field</code> 类有一个 <code>getType</code> 方法，用来返回描述字段类型的一个 <code>Class</code> 对象。</p><p><code>Method</code> 类和 <code>Constructor</code> 类有报告参数类型的方法， <code>Method</code> 类还有一个报告返回类型的方法。</p><p>这三个类都有一个名为 <code>getModifiers</code> 的方法，返回一个整数用不同的二进制位描述所使用的修饰符，如 <code>public</code> 和 <code>static</code> 等。然后可以利用 <code>java.lang.reflect</code> 包中 <code>Modifier</code> 类的静态方法分析这个整数，例如 <code>isPublic</code> <code>isPrivate</code> 或 <code>isFinal</code> 判断一个方法或构造器的修饰情况，还可以利用 <code>toString</code> 方法打印修饰符。</p><p><code>Class</code> 类的 <code>getFields</code> <code>getMethods</code> 和 <code>getConstructors</code> 方法将分别返回这个类支持的公共字段、方法和构造器的数组，其中包括超类的公共成员。</p><p><code>Class</code> 类的 <code>getDeclaredFields</code> <code>getDeclaredMethods</code> <code>getDeclaredConstructors</code> 方法将分别返回这个类中声明的全部字段、方法和构造器组成的数组，其中包括私有成员、包成员和受保护成员，以及有包访问权限的成员，但不包括超类的成员。</p><h4 id="_2-9-4-1-java-lang-class-api" tabindex="-1"><a class="header-anchor" href="#_2-9-4-1-java-lang-class-api"><span>2.9.4.1 java.lang.Class API</span></a></h4><ul><li><p><code>Field[] getFields()</code> 返回这个类或其超类的公共字段。</p></li><li><p><code>Field[] getDeclaredFields()</code> 返回这个类的全部字段。</p><p>如果类中没有这样的字段或者 <code>Class</code> 对象表示基本类型或数组类型，方法将返回长度为 <code>0</code> 的数组。</p></li><li><p><code>Method[] getMethods()</code> 返回所有的公共方法，包括从超类继承的公共方法。</p></li><li><p><code>Method[] getDeclaredMethods()</code> 返回这个类或接口的全部方法，但不包括从超类继承的方法。</p></li><li><p><code>Constructor[] getConstructors()</code> 返回所有的公共构造器。</p></li><li><p><code>Constructors[] getDeclaredConstructors()</code> 返回全部构造器。</p></li><li><p><code>boolean isInterface()</code></p></li><li><p><code>boolean isEnum()</code></p></li><li><p><code>boolean isRecord()</code></p></li><li><p><code>RecordComponent[] getRecordComponent()</code> 返回对象数组，这些对象描述了记录字段，如果这个类不是一个记录则返回 <code>null</code> 。</p></li><li><p><code>String getPackageName()</code> 返回类型的包名，如果是数组类型则返回元素类型所属的包，如果是基本类型则返回 <code>&quot;java.lang&quot;</code> 。</p></li></ul><h4 id="_2-9-4-2-java-lang-reflect-field-method-constructor-api" tabindex="-1"><a class="header-anchor" href="#_2-9-4-2-java-lang-reflect-field-method-constructor-api"><span>2.9.4.2 java.lang.reflect.(Field/Method/Constructor) API</span></a></h4><ul><li><code>Class getDeclaringClass()</code> 返回定义了这个构造器、方法或字段的类。</li><li><code>Class[] getExceptionTypes()</code> 返回对象数组，各个对象表示这个方法抛出的异常的类型。</li><li><code>int getModifiers()</code> 返回整数表示修饰符。</li><li><code>String getName()</code></li><li><code>Class[] getParameterTypes()</code> 返回对象数组，各个对象表示参数的类型。</li><li><code>Class getReturnType()</code> 返回表示返回类型的对象。</li></ul><h4 id="_2-9-4-3-java-lang-reflect-recordcomponent-api" tabindex="-1"><a class="header-anchor" href="#_2-9-4-3-java-lang-reflect-recordcomponent-api"><span>2.9.4.3 java.lang.reflect.RecordComponent API</span></a></h4><ul><li><code>String getName()</code></li><li><code>Class&lt;?&gt; getType()</code> 返回这个记录组件的名字和类型。</li><li><code>Method getAccessor()</code> 返回 <code>Method</code> 对象来访问这个记录组件。</li></ul><h4 id="_2-9-4-4-java-lang-reflect-modifier-api" tabindex="-1"><a class="header-anchor" href="#_2-9-4-4-java-lang-reflect-modifier-api"><span>2.9.4.4 java.lang.reflect.Modifier API</span></a></h4><ul><li><p><code>static String toString(int modifiers)</code> 返回 <code>modifiers</code> 中设置的二进制位对应的修饰符。</p></li><li><p><code>static boolean isAbstract(int modifiers)</code></p></li><li><p><code>static boolean isFinal(int modifiers)</code></p></li><li><p><code>static boolean isInterface(int modifiers)</code></p></li><li><p><code>static boolean isNative(int modifiers)</code></p></li><li><p><code>static boolean isPrivate(int modifiers)</code></p></li><li><p><code>static boolean isProtected(int modifiers)</code></p></li><li><p><code>static boolean isPublic(int modifiers)</code></p></li><li><p><code>static boolean isStatic(int modifiers)</code></p></li><li><p><code>static boolean isStrict(int modifiers)</code></p></li><li><p><code>static boolean isSynchronized(int modifiers)</code></p></li><li><p><code>static boolean isVolatile(int modifiers)</code></p><p>检测 <code>modifiers</code> 值中与方法名中修饰符对应的二进制位。</p></li></ul><h3 id="_2-9-5-使用反射在运行时分析对象" tabindex="-1"><a class="header-anchor" href="#_2-9-5-使用反射在运行时分析对象"><span>2.9.5 使用反射在运行时分析对象</span></a></h3><p>利用反射可以在运行时查看对象字段的内容，只需要知道字段名和类型即可。</p><p>这里需要用到 <code>Field</code> 类的 <code>get</code> 方法，如果 <code>f</code> 是一个 <code>Field</code> 类型的对象， <code>obj</code> 是一个包含 <code>f</code> 字段的类的对象，则 <code>f.get(obj)</code> 将返回一个对象，它的值为 <code>obj</code> 的当前字段值。</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token keyword">var</span> harry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token string">&quot;Harry Hacker&quot;</span><span class="token punctuation">,</span> <span class="token number">50000</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1989</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">Class</span> cl <span class="token operator">=</span> harry<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">Field</span> f <span class="token operator">=</span> cl<span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">Object</span> v <span class="token operator">=</span> f<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>harry<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>除了查看字段值，也可以通过 <code>f.set(obj, value)</code> 方法修改字段值。</p><p>但是，如果该字段是一个无权限访问的字段，这两个方法都会抛出 <code>IllegalAccessException</code> 异常。不过可以调用 <code>setAccessible</code> 方法覆盖访问权限，如果拒绝修改，该方法会抛出异常。访问可能被模块系统或安全管理器拒绝。注意，安全管理器在Java 17后已经被废除。如果想要强行修改，需要把 <code>java.base</code> 模块中的 <code>java.util</code> 包和 <code>java.lang</code> 包打开到无名模块。</p><p>下面是一些运行时分析对象可能用到的API</p><ul><li><code>void setAccessible(boolean flag)</code></li><li><code>boolean trySetAccessible()</code></li><li><code>boolean canAccess(Object obj)</code></li><li><code>static void setAccessible(AccessibleObject[] array, boolean flag)</code></li><li><code>Field getField(String name)</code></li><li><code>Field getDeclaredField(String name)</code></li><li><code>Object get(Object obj)</code></li><li><code>void set(Object obj, Object newValue)</code></li></ul><h3 id="_2-9-6-使用反射编写泛型代码" tabindex="-1"><a class="header-anchor" href="#_2-9-6-使用反射编写泛型代码"><span>2.9.6 使用反射编写泛型代码</span></a></h3><p><code>java.lang.reflect</code> 包中的 <code>Array</code> 类允许动态地创建数组，例如 <code>Arrays</code> 类的 <code>copyOf</code> 方法就使用了这个类。</p><p>为了实现这样一个通用功能，需要创建与原数组类型相同的新数组，其中最关键的是 <code>Array</code> 类的静态方法 <code>newInstance</code> 。这个方法能够构造一个新数组，调用时需要传递两个参数，一个是数组的元素类型，另一个是期望的数组长度。</p><p>可以通过调用 <code>Array.getLength(a)</code> 方法获得数组的长度，要获得新数组的元素类型需要执行以下操作：</p><ol><li>获得 <code>a</code> 的类对象。</li><li>确认它确实是一个数组。</li><li>使用 <code>Class</code> 类的 <code>getComponentType</code> 方法得到数组的正确类型。</li><li>反过来对于表示类 <code>C</code> 的 <code>Class</code> 对象 <code>arrayType</code> 方法会生成表示 <code>C[]</code> 的 <code>Class</code> 对象。</li></ol><p>下面是可能的实现方法：</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Object</span> <span class="token function">goodCopyOf</span><span class="token punctuation">(</span><span class="token class-name">Object</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> newLength<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">Class</span> cl <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>cl<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token class-name">Class</span> componentType <span class="token operator">=</span> cl<span class="token punctuation">.</span><span class="token function">getComponentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">int</span> length <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span><span class="token function">getLength</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token class-name">Object</span> newArray <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span>componentType<span class="token punctuation">,</span> newLength<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> newArray<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>length<span class="token punctuation">,</span> newLength<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">return</span> newArray<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>需要注意的是参数类型是 <code>Object</code> 类型，而不是 <code>Object[]</code> 类型，因为基本类型的数组类型可以转换成 <code>Object</code> 类型，而不能转换成 <code>Object[]</code> 类型。</p><p>下面是一些可能用到的API</p><p><strong>java.lang.Class</strong></p><ul><li><p><code>boolean isArray()</code> 判断是否为数组类型。</p></li><li><p><code>Class&lt;?&gt; getComponentType()</code></p></li><li><p><code>Class&lt;?&gt; componentType()</code></p><p>如果当前对象为数组类型，返回元素类型的 <code>Class</code> 对象；否则返回 <code>null</code> 引用。</p></li><li><p><code>Class&lt;?&gt; arrayType()</code></p><p>返回当前元素类型对应的数组类型的 <code>Class</code> 对象。</p></li></ul><p><strong>java.lang.reflect.Array</strong></p><ul><li><p><code>static Object get(Object array, int index)</code></p></li><li><p><code>static xxx getXxx(Object array, int index)</code></p><p>其中 <code>xxx</code> 为基本类型，这些方法将返回给定数组中存储在给定索引上的元素的值。</p></li><li><p><code>static void set(Object array, int index, Object newValue)</code></p></li><li><p><code>static void setXxx(Object array, int index, xxx newValue)</code></p><p>修改给定数组中给定索引上元素的值。</p></li><li><p><code>static int getLength(Object array)</code></p><p>返回给定数组的长度。</p></li><li><p><code>static Object newInstance(Class componenetType, int length)</code></p></li><li><p><code>static Object newInstance(Class componentType, int[] lengths)</code></p><p>返回给定元素类型，给定大小的新数组。</p></li></ul><blockquote><p>PS：前面几个还不如用运算符方便呢。</p></blockquote><h3 id="_2-9-7-调用任意方法和构造器" tabindex="-1"><a class="header-anchor" href="#_2-9-7-调用任意方法和构造器"><span>2.9.7 调用任意方法和构造器</span></a></h3><p>在Java中没有函数指针语法，设计者认为Java的接口和lambda表达式是更好的解决方案。不过利用反射机制，可以调用任意的方法。</p><p>在 <code>Method</code> 类中有一个 <code>invoke</code> 方法，允许调用包装在当前 <code>Method</code> 对象中的方法。该方法的签名为</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">Object</span> obj<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>第一个参数是隐式参数，其余的对象提供了显式参数。对于静态方法，第一个参数会忽略，可以把它设置为 <code>null</code> 。</p><p>如果返回值是基本类型，则 <code>invoke</code> 方法返回的实际上是其包装器类型。但不管是哪种返回类型，都需要对 <code>Object</code> 类型进行强制类型转换。</p><p>为了获取想要调用的 <code>Method</code> 对象，可以使用 <code>getDeclaredMethods</code> 方法然后搜索对象数组，直到找到需要的对象。或者也可以调用 <code>Class</code> 类的 <code>getMethod</code> 方法，该方法的签名为：</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token class-name">Method</span> <span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> parameter<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>当然，也可以使用类似的方法调用任意的构造器。将构造器的参数类型提供给 <code>Class.getConstructor</code> 方法，并为 <code>Constructor.newInstance</code> 方法提供参数值：</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token class-name">Class</span> cl <span class="token operator">=</span> <span class="token class-name">Random</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">Constructor</span> cons <span class="token operator">=</span> cl<span class="token punctuation">.</span><span class="token function">getConstructor</span><span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">Object</span> obj <span class="token operator">=</span> cons<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token number">42L</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果在调用方法的时候提供了错误的参数，则 <code>invoke</code> 方法会抛出异常。</p><p>使用这种方式调用方法容易出现错误并且不好排查，同时运行效率会比较低，所以不建议使用 <code>Method</code> 对象，仅在必要的情况下使用。通常更好的做法是使用接口及lambda表达式。</p><blockquote><p>建议Java开发人员不要使用回调函数的 <code>Method</code> 对象，可以使用回调的接口，这样不仅代码的执行速度更快，也更易于维护。</p></blockquote><h3 id="_2-10-继承的设计技巧" tabindex="-1"><a class="header-anchor" href="#_2-10-继承的设计技巧"><span>2.10 继承的设计技巧</span></a></h3><ol><li>将公共操作和字段放置在超类中。</li><li>不要随意使用 <code>protected</code> 字段。</li><li>使用继承实现<strong>is-a</strong>关系</li><li>除非所有继承的方法都有意义，否则不要使用继承。</li><li>覆盖方法时，不要改变预期的行为。</li><li>使用多态，而不要使用类型信息。与使用多个类型检测的代码相比，使用多态方法或接口实现的代码更容易进行维护和扩展。</li><li>不要滥用反射机制。这种功能主要适用于系统编程，通常并不适合编写应用程序。</li></ol></div></div><footer class="page-meta"><div class="meta-item edit-link"><span class="xicon-container left meta-item-label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M2 26h28v2H2z" fill="currentColor"></path><path d="M25.4 9c.8-.8.8-2 0-2.8l-3.6-3.6c-.8-.8-2-.8-2.8 0l-15 15V24h6.4l15-15zm-5-5L24 7.6l-3 3L17.4 7l3-3zM6 22v-3.6l10-10l3.6 3.6l-10 10H6z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Edit this page<!--]--></span></span></div><div class="meta-item last-updated"><span class="xicon-container left meta-item-label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M26 4h-4V2h-2v2h-8V2h-2v2H6c-1.1 0-2 .9-2 2v20c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 22H6V12h20v14zm0-16H6V6h4v2h2V6h8v2h2V6h4v4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Last Updated 2024/9/22 16:35:40<!--]--></span></span></div></footer><!----><!----></div><div class="page-catalog-container"><h5 class="tip">ON THIS PAGE</h5><ul><!--[--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/Java/Javamianxiangduixiangchengxusheji——jicheng.html#_2-1-类、超类和子类" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="2.1 类、超类和子类"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.1 类、超类和子类<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/Java/Javamianxiangduixiangchengxusheji——jicheng.html#_2-1-1-定义子类" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="2.1.1 定义子类"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.1.1 定义子类<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/Java/Javamianxiangduixiangchengxusheji——jicheng.html#_2-1-2-覆盖方法" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="2.1.2 覆盖方法"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.1.2 覆盖方法<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/Java/Javamianxiangduixiangchengxusheji——jicheng.html#_2-1-3-子类构造器" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="2.1.3 子类构造器"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.1.3 子类构造器<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/Java/Javamianxiangduixiangchengxusheji——jicheng.html#_2-1-4-继承层次结构" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="2.1.4 继承层次结构"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.1.4 继承层次结构<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/Java/Javamianxiangduixiangchengxusheji——jicheng.html#_2-1-5-多态" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="2.1.5 多态"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.1.5 多态<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/Java/Javamianxiangduixiangchengxusheji——jicheng.html#_2-1-6-方法调用" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="2.1.6 方法调用"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.1.6 方法调用<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/Java/Javamianxiangduixiangchengxusheji——jicheng.html#_2-1-7-阻止继承-final类和方法" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="2.1.7 阻止继承：final类和方法"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.1.7 阻止继承：final类和方法<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/Java/Javamianxiangduixiangchengxusheji——jicheng.html#_2-1-8-强制类型转换" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="2.1.8 强制类型转换"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.1.8 强制类型转换<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/Java/Javamianxiangduixiangchengxusheji——jicheng.html#_2-1-9-instanceof模式匹配" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="2.1.9 instanceof模式匹配"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.1.9 instanceof模式匹配<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/Java/Javamianxiangduixiangchengxusheji——jicheng.html#_2-1-10-受保护访问" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="2.1.10 受保护访问"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.1.10 受保护访问<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/Java/Javamianxiangduixiangchengxusheji——jicheng.html#_2-2-object-所有类的超类" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="2.2 Object：所有类的超类"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.2 Object：所有类的超类<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/Java/Javamianxiangduixiangchengxusheji——jicheng.html#_2-2-1-object类型的变量" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="2.2.1 Object类型的变量"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.2.1 Object类型的变量<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/Java/Javamianxiangduixiangchengxusheji——jicheng.html#_2-2-2-equals方法" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="2.2.2 equals方法"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.2.2 equals方法<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/Java/Javamianxiangduixiangchengxusheji——jicheng.html#_2-2-3-相等测试与继承" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="2.2.3 相等测试与继承"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.2.3 相等测试与继承<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/Java/Javamianxiangduixiangchengxusheji——jicheng.html#_2-2-4-hashcode方法" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="2.2.4 hashCode方法"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.2.4 hashCode方法<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/Java/Javamianxiangduixiangchengxusheji——jicheng.html#_2-2-5-tostring方法" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="2.2.5 toString方法"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.2.5 toString方法<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/Java/Javamianxiangduixiangchengxusheji——jicheng.html#_2-3-泛型数组列表" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="2.3 泛型数组列表"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.3 泛型数组列表<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/Java/Javamianxiangduixiangchengxusheji——jicheng.html#_2-3-1-声明数组列表" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="2.3.1 声明数组列表"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.3.1 声明数组列表<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/Java/Javamianxiangduixiangchengxusheji——jicheng.html#_2-3-2-访问数组列表元素" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="2.3.2 访问数组列表元素"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.3.2 访问数组列表元素<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/Java/Javamianxiangduixiangchengxusheji——jicheng.html#_2-3-3-类型化与原始数组列表的兼容性" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="2.3.3 类型化与原始数组列表的兼容性"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.3.3 类型化与原始数组列表的兼容性<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/Java/Javamianxiangduixiangchengxusheji——jicheng.html#_2-4-对象包装器与自动装箱" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="2.4 对象包装器与自动装箱"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.4 对象包装器与自动装箱<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/Java/Javamianxiangduixiangchengxusheji——jicheng.html#_2-4-1-自动装箱与自动拆箱" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="2.4.1 自动装箱与自动拆箱"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.4.1 自动装箱与自动拆箱<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/Java/Javamianxiangduixiangchengxusheji——jicheng.html#_2-4-2-包装器类常用api" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="2.4.2 包装器类常用API"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.4.2 包装器类常用API<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/Java/Javamianxiangduixiangchengxusheji——jicheng.html#_2-5-参数个数可变的方法" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="2.5 参数个数可变的方法"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.5 参数个数可变的方法<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/Java/Javamianxiangduixiangchengxusheji——jicheng.html#_2-6-抽象类" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="2.6 抽象类"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.6 抽象类<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/Java/Javamianxiangduixiangchengxusheji——jicheng.html#_2-7-枚举类" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="2.7 枚举类"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.7 枚举类<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/Java/Javamianxiangduixiangchengxusheji——jicheng.html#_2-8-密封类" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="2.8 密封类"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.8 密封类<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/Java/Javamianxiangduixiangchengxusheji——jicheng.html#_2-9-反射" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="2.9 反射"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.9 反射<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/Java/Javamianxiangduixiangchengxusheji——jicheng.html#_2-9-1-class类" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="2.9.1 Class类"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.9.1 Class类<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/Java/Javamianxiangduixiangchengxusheji——jicheng.html#_2-9-2-声明异常入门" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="2.9.2 声明异常入门"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.9.2 声明异常入门<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/Java/Javamianxiangduixiangchengxusheji——jicheng.html#_2-9-3-资源" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="2.9.3 资源"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.9.3 资源<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/Java/Javamianxiangduixiangchengxusheji——jicheng.html#_2-9-4-利用反射分析类的能力" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="2.9.4 利用反射分析类的能力"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.9.4 利用反射分析类的能力<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/Java/Javamianxiangduixiangchengxusheji——jicheng.html#_2-9-5-使用反射在运行时分析对象" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="2.9.5 使用反射在运行时分析对象"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.9.5 使用反射在运行时分析对象<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/Java/Javamianxiangduixiangchengxusheji——jicheng.html#_2-9-6-使用反射编写泛型代码" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="2.9.6 使用反射编写泛型代码"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.9.6 使用反射编写泛型代码<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/Java/Javamianxiangduixiangchengxusheji——jicheng.html#_2-9-7-调用任意方法和构造器" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="2.9.7 调用任意方法和构造器"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.9.7 调用任意方法和构造器<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/Java/Javamianxiangduixiangchengxusheji——jicheng.html#_2-10-继承的设计技巧" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="2.10 继承的设计技巧"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.10 继承的设计技巧<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--]--></ul></div></main><!--]--></div><!--[--><!----><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-BPAT15QX.js" defer></script>
  </body>
</html>
